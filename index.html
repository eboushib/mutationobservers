<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Testing ..</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
        }

        .div {
            background: #f7f7f7;
            border: 1px solid #eee;
            padding: 20px;
        }

        .sidebar {
            width: 200px;
            height: 100vh;
            background: #9e9e9e;
            float: left;
        }
    </style>
</head>

<body>
    <div class="sidebar">

    </div>
    <button class="btn" id="btn1">Show div 1</button>
    <button class="btn" id="btn2">Show div 2</button>


    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
        var button1 = document.getElementById('btn1');
        var button2 = document.getElementById('btn2');

        var div1 = document.createElement('div');
        div1.innerHTML = '<b>div 1</b>';
        div1.classList.add('div', 'div1');
        div1.id = 'div1';
        button1.onclick = function () {
            document.body.appendChild(div1);
        }

        var div2 = document.createElement('div');
        div2.innerHTML = '<b>div 2</b>';
        div2.classList.add('div', 'div2');
        div2.id = 'div2';
        button2.onclick = function () {
            document.body.appendChild(div2);
        };

        // --->>>
        (function (win) { // Mutation Observer Function
            'use strict';

            var listeners = [],
                doc = win.document,
                MutationObserver = win.MutationObserver || win.WebKitMutationObserver,
                observer;

            function ready(selector, fn) {

                listeners.push({ // Store the selector and callback to be monitored
                    selector: selector,
                    fn: fn
                });
                if (!observer) { // Watch for changes in the document
                    observer = new MutationObserver(check);
                    observer.observe(doc.documentElement, {
                        childList: true,
                        subtree: true
                    });
                }

                check(); // Check if the element is currently in the DOM
            }

            function check() { // Check the DOM for elements matching a stored selector

                for (var i = 0, len = listeners.length, listener, elements; i < len; i++) {
                    listener = listeners[i];

                    elements = doc.querySelectorAll(listener.selector); // Query for elements matching the specified selector
                    for (var j = 0, jLen = elements.length, element; j < jLen; j++) {
                        element = elements[j];

                        if (!element.ready) { // Make sure the callback isn't invoked with the same element more than once
                            element.ready = true;

                            listener.fn.call(element, element); // Invoke the callback with the element
                        }
                    }
                }
            }

            // Expose `ready`
            win.ready = ready;

        })(this);

        ready('#div1, #div2', function(element){
            sayHello();
        });

        function sayHello(){
            console.log('Hello !');
        }
    </script>
</body>

</html>